import{b as N,d as $,h as D,j as U,m as j,n as B}from"./chunk-NLSAXJXX.js";import{c as Q}from"./chunk-ELHNPET6.js";import"./chunk-ZFSBURK3.js";import{m as M,o as E}from"./chunk-4J35EKZG.js";import{Ab as p,Bb as d,Ja as I,Jb as s,Kb as g,Lb as b,Na as c,Nb as q,Ob as P,Pb as T,Xa as S,Xb as V,Zb as F,a as h,b as v,ba as w,ia as u,ja as m,jb as x,ob as C,qb as _,rb as y,sb as n,tb as r,ub as f,xb as k}from"./chunk-3H35EQGR.js";function A(l,e){if(l&1&&(n(0,"th",3)(1,"span",5),s(2),r()()),l&2){let t=e.$implicit;c(2),g(t)}}function R(l,e){if(l&1){let t=k();n(0,"tr",4)(1,"td",6),f(2,"img",7),r(),n(3,"td",8)(4,"div",9),s(5),r()(),n(6,"td",8),s(7),r(),n(8,"td",8)(9,"div",10)(10,"div",11)(11,"div",12)(12,"button",13),p("click",function(){let i=u(t).$implicit,a=d();return m(a.updateQuantity(i,-1))}),s(13," - "),r(),n(14,"input",14),T("ngModelChange",function(i){let a=u(t).$implicit;return P(a.quantity,i)||(a.quantity=i),m(i)}),p("change",function(){let i=u(t).$implicit,a=d();return m(a.onQuantityChange(i))}),r(),n(15,"button",15),p("click",function(){let i=u(t).$implicit,a=d();return m(a.updateQuantity(i,1))}),s(16," + "),r()()()()(),n(17,"td",16),s(18),V(19,"number"),r(),n(20,"td",8)(21,"a",17),p("click",function(){let i=u(t).$implicit,a=d();return m(a.RemoveProductFromCart(i==null||i.product==null?null:i.product.id))}),f(22,"img",18),r()()()}if(l&2){let t=e.$implicit;c(2),x("src",t==null||t.product==null?null:t.product.imgCover,I),c(3),g(t==null||t.product==null?null:t.product.title),c(2),b(" $",t==null||t.product==null?null:t.product.price," "),c(5),x("disabled",t.quantity<=1),c(2),q("ngModel",t.quantity),c(4),b(" $",F(19,6,t.subTotal,"1.2-2")," ")}}var O=class l{cartData;cartItems=[];tableHeaders=["Image","Product Name","Price","Quantity","Subtotal","Actions"];_checkoutService=w(Q);ngOnInit(){this.getUserCart()}getUserCart(){this._checkoutService.getUserCart().subscribe(e=>{this.cartData=e.cart,this.cartItems=e.cart.cartItems.map(t=>v(h({},t),{subTotal:t.product.price*t.quantity}))},e=>console.log(e))}updateQuantity(e,t){let o=e.quantity+t;o<1||(e.quantity=o,e.subTotal=e.product.price*e.quantity,this.updateCartQuantity(e))}onQuantityChange(e){(e.quantity<1||isNaN(e.quantity))&&(e.quantity=1),e.subTotal=e.product.price*e.quantity,this.updateCartQuantity(e)}updateCartQuantity(e){if(!e?.product?.id)return;let t={quantity:e.quantity};this._checkoutService.updateCartProductQuantity(e.product.id,t).subscribe({next:()=>console.log(`Updated quantity to ${e.quantity}`)})}RemoveProductFromCart(e){this._checkoutService.deleteProductFromCart(e).subscribe({next:()=>{console.log("Product removed from cart"),this.getUserCart()}})}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=S({type:l,selectors:[["app-cart"]],decls:9,vars:0,consts:[[1,"relative","overflow-x-auto"],[1,"w-full","text-sm"],[1,"text-xs","text-center","uppercase"],["scope","col",1,"px-2","py-3"],[1,"bg-white","text-center"],[1,"heading"],[1,"p-2","flex","justify-center"],["alt","Product Image",1,"w-24","h-24",3,"src"],[1,"px-2","py-3"],[1,"text-lg","font-bold"],[1,"flex","justify-center"],[1,"options","flex","flex-col"],[1,"quantity","flex","items-center","gap-2","mt-2"],[1,"px-4","py-2","bg-secondary","text-primary","rounded-3xl","transition-colors","text-sm","md:text-sm",3,"click","disabled"],["type","number","min","1",1,"w-16","text-center","px-4","py-2","text-primary","rounded-3xl","text-sm","md:text-sm","font-semibold","border","border-none",3,"ngModelChange","change","ngModel"],[1,"px-4","py-2","bg-secondary","text-primary","rounded-3xl","transition-colors","text-sm","md:text-sm",3,"click"],[1,"px-2","py-3","text-center"],[1,"font-medium","flex","justify-center","cursor-pointer","hover:border-b-2",3,"click"],["src","icons/Remove.svg","alt",""]],template:function(t,o){t&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),_(4,A,3,1,"th",3,C),r()(),n(6,"tbody"),_(7,R,23,9,"tr",4,C),r()()()),t&2&&(c(4),y(o.tableHeaders),c(3),y(o.cartItems))},dependencies:[E,M,B,N,U,$,j,D],styles:[".heading[_ngcontent-%COMP%]{padding:8px 8px 9px;border-bottom-width:1px;font-family:var(--font-roboto);font-weight:600;font-size:14px;line-height:25.2px;letter-spacing:.4px}"]})};export{O as CartComponent};
