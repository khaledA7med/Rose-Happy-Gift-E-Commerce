import{b as w}from"./chunk-H7UPSTIR.js";import{$ as m,W as a,Z as f,aa as c,j as h,r as l,xa as g}from"./chunk-QADCDCCZ.js";var v=class r{modalState=new h;modalState$=this.modalState.asObservable();open(i){this.modalState.next({id:i,isOpen:!0})}close(i){this.modalState.next({id:i,isOpen:!1})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};var n=(()=>{class r{static LOGIN="https://flower.elevateegy.com/api/v1/auth/signin";static REGISTER="https://flower.elevateegy.com/api/v1/auth/signup";static CHANGE_PASSWORD="https://flower.elevateegy.com/api/v1/auth/changePassword";static DELETE_ACCOUNT="https://flower.elevateegy.com/api/v1/auth/deleteMe";static EDIT_PROFILE="https://flower.elevateegy.com/api/v1/auth/editProfile";static LOGOUT="https://flower.elevateegy.com/api/v1/auth/logout";static USER_INFO="https://flower.elevateegy.com/api/v1/auth/profileData";static FORGET_PASSWORD="https://flower.elevateegy.com/api/v1/auth/forgotPassword";static RESET_PASSWORD="https://flower.elevateegy.com/api/v1/auth/resetPassword";static VERIFY_CODE="https://flower.elevateegy.com/api/v1/auth/verifyResetCode"}return r})(),A=(()=>{class r{constructor(){}loginAdapt(e){return{message:e.message,token:e.token}}registerAdapt(e){return{message:e.message}}forgetPassAdapt(e){return{message:e.message,info:e.info}}verifyCodeAdapt(e){return{status:e.status}}resetPassAdapt(e){return{message:e.message}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),N=(()=>{class r{_authApiAdapter=c(A);_httpClient=c(w);login(e){return this._httpClient.post(n.LOGIN,e).pipe(l(t=>this._authApiAdapter.loginAdapt(t)))}register(e){return this._httpClient.post(n.REGISTER,e).pipe(l(t=>this._authApiAdapter.registerAdapt(t)))}logout(){return this._httpClient.get(n.LOGOUT)}changePassword(e){return this._httpClient.post(n.CHANGE_PASSWORD,e)}resetPassword(e){return this._httpClient.put(n.RESET_PASSWORD,e).pipe(l(t=>this._authApiAdapter.resetPassAdapt(t)))}forgetPassword(e){return this._httpClient.post(n.FORGET_PASSWORD,e).pipe(l(t=>this._authApiAdapter.forgetPassAdapt(t)))}verifyCode(e){return this._httpClient.post(n.VERIFY_CODE,e).pipe(l(t=>this._authApiAdapter.verifyCodeAdapt(t)))}userInfo(){return this._httpClient.get(n.USER_INFO)}editProfile(e){return this._httpClient.post(n.EDIT_PROFILE,e)}deleteUser(){return this._httpClient.get(n.DELETE_ACCOUNT)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var I=new f("JWT_OPTIONS"),E=(()=>{class r{constructor(e=null){this.tokenGetter=e&&e.tokenGetter||function(){}}urlBase64Decode(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:{t+="==";break}case 3:{t+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(t)}b64decode(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="";if(e=String(e).replace(/=+$/,""),e.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let p=0,d,s,S=0;s=e.charAt(S++);~s&&(d=p%4?d*64+s:s,p++%4)?o+=String.fromCharCode(255&d>>(-2*p&6)):0)s=t.indexOf(s);return o}b64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(this.b64decode(e),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(e=this.tokenGetter()){return e instanceof Promise?e.then(t=>this._decodeToken(t)):this._decodeToken(e)}_decodeToken(e){if(!e||e==="")return null;let t=e.split(".");if(t.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let o=this.urlBase64Decode(t[1]);if(!o)throw new Error("Cannot decode the token.");return JSON.parse(o)}getTokenExpirationDate(e=this.tokenGetter()){return e instanceof Promise?e.then(t=>this._getTokenExpirationDate(t)):this._getTokenExpirationDate(e)}_getTokenExpirationDate(e){let t;if(t=this.decodeToken(e),!t||!t.hasOwnProperty("exp"))return null;let o=new Date(0);return o.setUTCSeconds(t.exp),o}isTokenExpired(e=this.tokenGetter(),t){return e instanceof Promise?e.then(o=>this._isTokenExpired(o,t)):this._isTokenExpired(e,t)}_isTokenExpired(e,t){if(!e||e==="")return!0;let o=this.getTokenExpirationDate(e);return t=t||0,o===null?!1:!(o.valueOf()>new Date().valueOf()+t*1e3)}getAuthScheme(e,t){return typeof e=="function"?e(t):e}}return r.\u0275fac=function(e){return new(e||r)(m(I))},r.\u0275prov=a({token:r,factory:r.\u0275fac}),r})();var T=class r{jwtHelper=new E;userEmailSignal=g(null);constructor(){}get currentToken(){return localStorage.getItem("app:token")}get isTokenAvailabe(){return!!localStorage.getItem("app:token")}get decodeToken(){return this.jwtHelper.decodeToken(localStorage.getItem("app:token"))}getUser(){return this.decodeToken}setUserEmail(i){this.userEmailSignal.set(i)}getUserEmailSignal(){return this.userEmailSignal}static \u0275fac=function(e){return new(e||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{v as a,N as b,T as c};
