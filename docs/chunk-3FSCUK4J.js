import{j as L}from"./chunk-TJ623PIW.js";import{b as z,c as s,d as $,e as Z,f as G,g as f,i as Q,j as B,k as H,m as Y,n as J,o as K,p as U,q as W,r as X}from"./chunk-UFFBPP2F.js";import{a as E,b as j}from"./chunk-MCMXQXQ6.js";import{$a as u,Cb as T,Db as I,Eb as V,Fb as a,Hb as q,Ma as d,Ob as b,Wa as y,aa as C,ha as _,hb as g,ia as w,ja as R,ka as F,lb as c,lc as D,qb as r,ra as x,rb as o,sb as h,sc as O,vb as v,wb as p,xb as S,yb as M,zb as A}from"./chunk-QADCDCCZ.js";var oe=["modalEl"],ie=[[["","modal-header",""]],[["","modal-body",""]]],ne=["[modal-header]","[modal-body]"],N=class t{modalElement;modalInstance;modalSubscription;modalId="default-modal";closable=!0;close=new x;modalService=C(E);ngAfterViewInit(){let i={placement:"center",backdrop:"static",backdropClasses:"bg-gray-900/50 fixed inset-0 z-40",closable:this.closable};this.modalInstance=new L(this.modalElement.nativeElement,i),this.modalSubscription=this.modalService.modalState$.subscribe(({id:n,isOpen:e})=>{n===this.modalId&&(e?this.modalInstance.show():(this.modalInstance.hide(),this.close.emit()))})}closeModal(){this.modalService.close(this.modalId),this.close.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=y({type:t,selectors:[["app-modal"]],viewQuery:function(n,e){if(n&1&&T(oe,5),n&2){let l;I(l=V())&&(e.modalElement=l.first)}},inputs:{modalId:"modalId",closable:"closable"},outputs:{close:"close"},ngContentSelectors:ne,decls:8,vars:0,consts:[["modalEl",""],["id","authentication-modal","tabindex","-1","aria-hidden","true",1,"hidden","overflow-y-auto","overflow-x-hidden","fixed","top-0","right-0","left-0","bottom-0","z-50","justify-center","items-center","w-full","md:inset-0","h-[calc(100%-1rem)]","max-h-full"],[1,"relative","p-4","w-full","max-w-xl","max-h-max"],[1,"relative","bg-white","rounded-lg","shadow-sm","dark:bg-gray-700","p-4"],[1,"rounded-t","modal-header"],[1,"modal-body"]],template:function(n,e){n&1&&(M(ie),r(0,"div",1,0)(2,"div",2)(3,"div",3)(4,"div",4),A(5),o(),r(6,"div",5),A(7,1),o()()()())},encapsulation:2})};var k=t=>({"border-red-500 dark:border-red-600":t});function ae(t,i){t&1&&(r(0,"p",2),a(1," FirstName is required. "),o())}function se(t,i){t&1&&(r(0,"p",2),a(1,"First Name must contain only alphabet letters"),o())}function le(t,i){t&1&&(r(0,"p",2),a(1," LastName is required. "),o())}function de(t,i){t&1&&(r(0,"p",2),a(1,"LastName is Invalid"),o())}function me(t,i){t&1&&(r(0,"p",2),a(1," Phone Number is required. "),o())}function pe(t,i){t&1&&(r(0,"p",2),a(1,"Phone Number is Invalid"),o())}function ue(t,i){t&1&&(r(0,"p",2),a(1," Email is required. "),o())}function ge(t,i){t&1&&(r(0,"p",2),a(1,"Email is Invalid"),o())}function ce(t,i){t&1&&(r(0,"p",2),a(1,"Password is Required"),o())}function he(t,i){t&1&&(r(0,"p",2),a(1,"Password must be at least 8 characters long"),o())}function fe(t,i){t&1&&(r(0,"p",2),a(1,"Password must contain at least one special character ,one uppercase letter and one number"),o())}function Ce(t,i){t&1&&(r(0,"p",2),a(1,"Confirm password is Required"),o())}function be(t,i){t&1&&(r(0,"p",2),a(1,"Confirm password must be at least 8 characters long"),o())}function _e(t,i){t&1&&(r(0,"p",2),a(1,"Confirm password must contain at least one special character ,one uppercase letter and one number"),o())}function we(t,i){t&1&&(r(0,"p",2),a(1,"passwords do not match"),o())}var P=class t{register=!0;isSignIn=!1;forgetPass=!1;verify=!1;setPass=!1;registerForm;submitted=!1;loading=!1;subscription=[];changeState=new x;_AuthApiService=C(j);modalService=C(E);login(){this.changeState.emit("login")}ngOnInit(){this.initRegisterForm()}initRegisterForm(){this.registerForm=new G({username:new f("",[s.required,s.minLength(4),s.maxLength(25),s.pattern(/^[A-Za-z]+$/)]),firstName:new f("",[s.required,s.pattern(/^[A-Za-z]+$/)]),lastName:new f("",[s.required,s.pattern(/^[A-Za-z]+$/)]),phone:new f("",[s.required,s.pattern(/^(010|011|012|015)\d{8}$/)]),email:new f("",[s.required,s.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]),password:new f("",[s.required,s.minLength(8),s.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),rePassword:new f("",[s.required,s.minLength(8),s.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)])},{validators:this.matchPasswords("password","rePassword")})}get registerControls(){return this.registerForm.controls}matchPasswords(i,n){return e=>{let l=e.get(i),m=e.get(n);return m?.errors&&!m.errors.passwordMismatch?null:l?.value!==m?.value?(m?.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(m?.setErrors(null),null)}}validationChecker(){return!this.registerForm.invalid}signup(){if(this.submitted=!0,!this.validationChecker())return;this.loading=!0;let i={username:this.registerControls.username.value,firstName:this.registerControls.firstName.value,lastName:this.registerControls.lastName.value,phone:this.registerControls.phone.value,email:this.registerControls.email.value,password:this.registerControls.password.value,rePassword:this.registerControls.rePassword.value},n=this._AuthApiService.register(i).subscribe({next:e=>{e.message==="success"&&(this.submitted=!1,this.loading=!1,this.login())},error:e=>{this.submitted=!1,this.loading=!1}});this.subscription.push(n)}ngOnDestroy(){this.subscription&&this.subscription.forEach(i=>i.unsubscribe())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=y({type:t,selectors:[["app-register"]],outputs:{changeState:"changeState"},decls:34,vars:27,consts:[[1,"space-y-4",3,"formGroup"],["type","text","name","firstName","id","firstName","formControlName","firstName","placeholder","First Name",1,"auth-input","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngClass"],[1,"text-red-500","text-sm","mt-1"],["type","text","name","lastName","id","lastName","formControlName","lastName","placeholder","Last Name",1,"auth-input","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngClass"],["type","text","name","phone","id","phone","formControlName","phone","placeholder","Phone Number",1,"auth-input","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngClass"],["type","email","name","email","id","email","formControlName","email","placeholder","Email",1,"auth-input","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngClass"],["type","password","name","password","id","password","placeholder","Password","formControlName","password",1,"auth-input","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngClass"],["type","password","name","rePassword","id","rePassword","placeholder","Confirm Password","formControlName","rePassword",1,"auth-input","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngClass"],[1,"text-sm","text-center","font-medium","text-gray-500","dark:text-gray-300"],["type","button",1,"login","text-sm","hover:underline","text-left","leading-5","font-semibold",3,"click"],[1,"flex","justify-center"],[3,"clicked","label","loading"]],template:function(n,e){n&1&&(r(0,"form",0)(1,"div"),h(2,"input",1),u(3,ae,2,0,"p",2)(4,se,2,0,"p",2),o(),r(5,"div"),h(6,"input",3),u(7,le,2,0,"p",2)(8,de,2,0,"p",2),o(),r(9,"div"),h(10,"input",4),u(11,me,2,0,"p",2)(12,pe,2,0,"p",2),o(),r(13,"div"),h(14,"input",5),u(15,ue,2,0,"p",2)(16,ge,2,0,"p",2),o(),r(17,"div"),h(18,"input",6),u(19,ce,2,0,"p",2)(20,he,2,0,"p",2)(21,fe,2,0,"p",2),o(),r(22,"div"),h(23,"input",7),u(24,Ce,2,0,"p",2)(25,be,2,0,"p",2)(26,_e,2,0,"p",2)(27,we,2,0,"p",2),o(),r(28,"div",8),a(29," Already have an account? "),r(30,"button",9),p("click",function(){return e.login()}),a(31," Login "),o()(),r(32,"div",10)(33,"app-auth-button",11),p("clicked",function(){return e.signup()}),o()()()),n&2&&(g("formGroup",e.registerForm),d(2),g("ngClass",b(15,k,(e.registerControls.firstName.touched||e.submitted)&&(e.registerControls.firstName.hasError("pattern")||e.registerControls.firstName.hasError("required")))),d(),c((e.registerControls.firstName.touched||e.submitted)&&e.registerControls.firstName.hasError("required")?3:e.registerControls.firstName.hasError("pattern")?4:-1),d(3),g("ngClass",b(17,k,(e.registerControls.lastName.touched||e.submitted)&&(e.registerControls.lastName.hasError("pattern")||e.registerControls.lastName.hasError("required")))),d(),c((e.registerControls.lastName.touched||e.submitted)&&e.registerControls.lastName.hasError("required")?7:e.registerControls.lastName.hasError("pattern")?8:-1),d(3),g("ngClass",b(19,k,(e.registerControls.phone.touched||e.submitted)&&(e.registerControls.phone.hasError("pattern")||e.registerControls.phone.hasError("required")))),d(),c((e.registerControls.phone.touched||e.submitted)&&e.registerControls.phone.hasError("required")?11:e.registerControls.phone.hasError("pattern")?12:-1),d(3),g("ngClass",b(21,k,(e.registerControls.email.touched||e.submitted)&&(e.registerControls.email.hasError("pattern")||e.registerControls.email.hasError("required")))),d(),c((e.registerControls.email.touched||e.submitted)&&e.registerControls.email.hasError("required")?15:e.registerControls.email.hasError("pattern")?16:-1),d(3),g("ngClass",b(23,k,(e.registerControls.password.touched||e.submitted)&&(e.registerControls.password.hasError("pattern")||e.registerControls.password.hasError("required")||e.registerControls.password.hasError("minlength")))),d(),c((e.registerControls.password.touched||e.submitted)&&e.registerControls.password.hasError("required")?19:e.registerControls.password.hasError("minlength")?20:e.registerControls.password.hasError("pattern")?21:-1),d(4),g("ngClass",b(25,k,(e.registerControls.rePassword.touched||e.submitted)&&(e.registerControls.rePassword.hasError("pattern")||e.registerControls.rePassword.hasError("required")||e.registerControls.rePassword.hasError("minlength")))),d(),c((e.registerControls.rePassword.touched||e.submitted)&&e.registerControls.rePassword.hasError("required")?24:e.registerControls.rePassword.hasError("minlength")?25:e.registerControls.rePassword.hasError("pattern")?26:e.registerControls.rePassword.hasError("passwordMismatch")?27:-1),d(9),g("label","Create Account")("loading",e.loading))},dependencies:[Y,Q,z,$,Z,B,H,O,D,J],styles:[".auth-text[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{font-family:var(--font-inter)}.login[_ngcontent-%COMP%]{color:var(--primary-color)}"]})};function ye(t,i){if(t&1){let n=v();r(0,"app-login",8),p("changeState",function(l){_(n);let m=S();return w(m.toggleState(l))}),o()}}function ve(t,i){if(t&1){let n=v();r(0,"app-forget-password",8),p("changeState",function(l){_(n);let m=S();return w(m.toggleState(l))}),o()}}function Se(t,i){if(t&1){let n=v();r(0,"app-verify",8),p("changeState",function(l){_(n);let m=S();return w(m.toggleState(l))}),o()}}function Ee(t,i){if(t&1){let n=v();r(0,"app-set-password",8),p("changeState",function(l){_(n);let m=S();return w(m.toggleState(l))}),o()}}function ke(t,i){if(t&1){let n=v();r(0,"app-register",8),p("changeState",function(l){_(n);let m=S();return w(m.toggleState(l))}),o()}}var re=class t{modalService=C(E);isSignIn=!0;register=!1;forgetPass=!1;verify=!1;setPass=!1;title="Login to your account";toggleState(i){switch(this.isSignIn=!1,this.register=!1,this.forgetPass=!1,this.verify=!1,this.setPass=!1,i){case"login":this.isSignIn=!0,this.title="Login to your account";break;case"register":this.register=!0,this.title="Create Account";break;case"forgetPassword":this.forgetPass=!0,this.title="Forgot Your Password ?";break;case"verify":this.verify=!0,this.title="Verify Code";break;case"setPassword":this.setPass=!0,this.title="Set a Password";break;default:break}}resetState(){this.title="Login to your account",this.isSignIn=!0,this.register=!1,this.forgetPass=!1,this.verify=!1,this.setPass=!1}onModalClose(){this.modalService.close("login"),this.resetState()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=y({type:t,selectors:[["app-auth"]],decls:15,vars:2,consts:[["modalId","login"],["modal-header","",1,"p-4","flex","items-center","justify-between"],[1,"text-2xl","font-semibold","text-gray-900","dark:text-white"],["type","button","data-modal-hide","default-modal",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","ms-auto","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],["modal-body","",1,"p-4"],[3,"changeState"]],template:function(n,e){n&1&&(r(0,"app-modal",0)(1,"div",1)(2,"h1",2),a(3),o(),r(4,"button",3),p("click",function(){return e.onModalClose()}),R(),r(5,"svg",4),h(6,"path",5),o(),F(),r(7,"span",6),a(8,"Close modal"),o()()(),r(9,"div",7),u(10,ye,1,0,"app-login")(11,ve,1,0,"app-forget-password")(12,Se,1,0,"app-verify")(13,Ee,1,0,"app-set-password")(14,ke,1,0,"app-register"),o()()),n&2&&(d(3),q(" ",e.title," "),d(7),c(e.isSignIn?10:e.forgetPass?11:e.verify?12:e.setPass?13:e.register?14:-1))},dependencies:[N,K,U,W,X,P],encapsulation:2})};export{re as a};
